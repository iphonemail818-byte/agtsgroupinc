<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>AGTS Booking</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<style>
* { box-sizing: border-box; }
html, body {
  margin:0; padding:0; height:100%;
  overflow:hidden;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background: url("https://raw.githubusercontent.com/iphonemail818-byte/agtsgroupinc/main/IMG_6201.png") center/cover no-repeat fixed;
  color: #fff;
}

/* HEADER / BURGER */
.header {
  position: fixed; top:16px; left:16px; z-index:50;
}
.burger {
  width:22px; height:16px; display:flex; flex-direction:column; justify-content:space-between; cursor:pointer;
}
.burger span { height:2px; width:100%; background:#fff; border-radius:2px; }

/* MENU */
.menu { position:fixed; top:0; left:0; width:260px; height:100%; background:rgba(11,11,16,.95);
       transform:translateX(-100%); transition:.3s; z-index:60; padding:80px 20px; }
.menu.open{ transform:translateX(0); }
.menu a{ display:block; padding:14px 0; color:#fff; text-decoration:none; border-bottom:1px solid #222; }
.menu-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.45); opacity:0; pointer-events:none; transition:.25s; z-index:55; }
.menu-backdrop.show { opacity:1; pointer-events:auto; }

/* CONTAINER */
.container { max-width:520px; margin:120px auto 0; padding:16px; }
.card { background:rgba(15,15,20,.95); border-radius:22px; padding:20px; box-shadow:0 25px 50px rgba(0,0,0,.7); }

/* FIELD */
.field { margin-bottom:18px; position:relative; }
.field label { display:block; font-size:.7em; letter-spacing:.12em; opacity:.6; margin-bottom:6px; }
.field input { width:100%; padding:14px 16px; font-size:16px; border-radius:14px; border:1px solid #333; background:#111; color:#fff; }

/* CURRENT LOCATION BUTTON */
.loc-btn { position:absolute; right:10px; top:34px; background:#222; border:none; color:#9ca3af; font-size:13px; padding:6px 10px; border-radius:10px; cursor:pointer; }

/* CONFIRMED ROWS */
.confirmed-row{
  margin:18px 0; padding-bottom:6px;
  border-bottom:1px solid rgba(255,255,255,.08);
  cursor:pointer; display:flex; justify-content:space-between;
}
.confirmed-row::after{ content:"›"; font-size:18px; opacity:.35; }
</style>
</head>
<body>

<!-- BURGER MENU -->
<div class="header">
  <div class="burger" id="burger"><span></span><span></span><span></span></div>
</div>
<div class="menu" id="menu">
  <a href="#">About</a>
  <a href="#">Log in</a>
  <a href="#">Drivers</a>
  <a href="#">Set up</a>
</div>
<div class="menu-backdrop" id="menuBackdrop"></div>

<!-- BOOKING FLOW -->
<div class="container">

  <div class="card">
    <div class="field">
      <label id="fieldLabel">PICKUP LOCATION</label>
      <input id="mainInput" placeholder="Enter pickup location">
      <button class="loc-btn" id="locBtn">Current</button>
    </div>
  </div>

  <div id="confirmed"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBiBOnLypU6-YGgPruQ2YFZvk3HyaaQ5Ps&libraries=places"></script>

<script>
/* BURGER MENU */
const burger=document.getElementById("burger");
const menu=document.getElementById("menu");
const menuBackdrop=document.getElementById("menuBackdrop");
burger.onclick=()=>{menu.classList.add("open");menuBackdrop.classList.add("show");}
menuBackdrop.onclick=()=>{menu.classList.remove("open");menuBackdrop.classList.remove("show");}

/* FLOW STATE */
let step="pickup"; // pickup → destination → date → time
const fieldLabel=document.getElementById("fieldLabel");
const input=document.getElementById("mainInput");
const confirmed=document.getElementById("confirmed");

/* GOOGLE PLACES AUTOCOMPLETE */
let autocomplete=new google.maps.places.Autocomplete(input);

/* CURRENT LOCATION */
document.getElementById("locBtn").onclick=()=>{
  if(!navigator.geolocation){alert("Location not supported"); return;}
  navigator.geolocation.getCurrentPosition(pos=>{
    const geocoder=new google.maps.Geocoder();
    geocoder.geocode({location:{lat:pos.coords.latitude,lng:pos.coords.longitude}},
      (results,status)=>{
        if(status==="OK" && results[0]){
          nextStep(results[0].formatted_address);
        } else alert("Cannot determine location");
      }
    );
  }, ()=>alert("Location permission denied"));
}

/* FLATPICKR */
function openDatePicker(){ flatpickr(input,{minDate:"today", onChange:(d)=>nextStep(d[0].toLocaleDateString())}); }
function openTimePicker(){ flatpickr(input,{enableTime:true,noCalendar:true,dateFormat:"h:i K", onChange:(t)=>nextStep(t[0].toLocaleTimeString())}); }

/* NEXT STEP FUNCTION */
function nextStep(value){
  // add confirmed row
  const row=document.createElement("div");
  row.className="confirmed-row";
  row.textContent=value;
  row.dataset.step=step;
  row.onclick=()=>{
    step=row.dataset.step;
    fieldLabel.textContent=step.toUpperCase();
    input.value=row.textContent;
    input.focus();
  };
  confirmed.appendChild(row);

  input.value="";

  // advance step
  if(step==="pickup"){ step="destination"; fieldLabel.textContent="DESTINATION"; input.placeholder="Enter destination";
    autocomplete=new google.maps.places.Autocomplete(input);}
  else if(step==="destination"){ step="date"; fieldLabel.textContent="DATE"; input.placeholder="Select date"; input.readOnly=true; openDatePicker();}
  else if(step==="date"){ step="time"; fieldLabel.textContent="TIME"; input.placeholder="Select time"; input.readOnly=true; openTimePicker();}
  else if(step==="time"){ input.style.display="none"; fieldLabel.style.display="none"; }
}

/* CONFIRM ENTER */
input.addEventListener("keydown", e=>{ if(e.key==="Enter") nextStep(input.value); });

</script>
</body>
</html>