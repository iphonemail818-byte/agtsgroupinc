<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>AGTS Booking</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<style>
* { box-sizing: border-box; }
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  overflow: hidden;
  background: url("https://raw.githubusercontent.com/iphonemail818-byte/agtsgroupinc/main/IMG_6201.png") center/cover no-repeat fixed;
  color: #fff;
}

/* HEADER / BURGER */
.header {
  position: fixed;
  top: 16px;
  left: 16px;
  z-index: 50;
}
.burger {
  width: 22px;
  height: 16px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  cursor: pointer;
}
.burger span {
  height: 2px;
  width: 100%;
  background: #fff;
  border-radius: 2px;
}

/* MENU */
.menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 260px;
  height: 100%;
  background: rgba(11,11,16,0.95);
  transform: translateX(-100%);
  transition: 0.3s;
  z-index: 60;
  padding: 80px 20px;
}
.menu.open { transform: translateX(0); }
.menu a {
  display: block;
  color: #fff;
  text-decoration: none;
  padding: 14px 0;
  border-bottom: 1px solid #222;
}
.menu-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  opacity: 0;
  pointer-events: none;
  transition: .25s;
  z-index: 55;
}
.menu-backdrop.show { opacity:1; pointer-events:auto; }

/* STEP CONTAINER */
.container {
  max-width: 520px;
  margin: 120px auto 0;
  padding: 16px;
}
.card {
  background: rgba(15,15,20,.95);
  border-radius: 22px;
  padding: 20px;
  box-shadow: 0 25px 50px rgba(0,0,0,.7);
  margin-bottom: 16px;
}

/* FIELDS */
.field {
  margin-bottom: 18px;
  position: relative;
}
.field label {
  display: block;
  font-size: .7em;
  letter-spacing: .12em;
  opacity: .6;
  margin-bottom: 6px;
}
.field input {
  width: 100%;
  padding: 14px 16px;
  font-size: 16px;
  border-radius: 14px;
  border: 1px solid #333;
  background: #111;
  color: #fff;
}

/* CURRENT LOCATION BUTTON */
.loc-btn {
  position: absolute;
  right: 10px;
  top: 34px;
  background: #222;
  border: none;
  color: #9ca3af;
  font-size: 13px;
  padding: 6px 10px;
  border-radius: 10px;
  cursor: pointer;
}

/* REVIEW */
.review {
  background: #111;
  padding: 16px;
  border-radius: 14px;
  margin-top: 10px;
}
</style>
</head>
<body>

<!-- HEADER / BURGER -->
<div class="header">
  <div class="burger" id="burger">
    <span></span><span></span><span></span>
  </div>
</div>

<div class="menu" id="menu">
  <a href="#">About</a>
  <a href="#">Log in</a>
  <a href="#">Drivers</a>
  <a href="#">Set up</a>
</div>
<div class="menu-backdrop" id="menuBackdrop"></div>

<!-- STEP-BY-STEP BOOKING -->
<div class="container">
  <div class="card" id="step1">
    <div class="field">
      <label>PICKUP LOCATION</label>
      <input id="pickup" placeholder="Enter pickup location">
      <button class="loc-btn" id="locBtn">Current</button>
    </div>
  </div>

  <div class="card" id="step2" style="display:none;">
    <div class="field">
      <label>DESTINATION</label>
      <input id="destination" placeholder="Enter destination">
    </div>
  </div>

  <div class="card" id="step3" style="display:none;">
    <div class="field">
      <label>DATE</label>
      <input id="date" readonly>
    </div>
    <div class="field">
      <label>TIME</label>
      <input id="time" readonly>
    </div>
  </div>

  <div class="card" id="step4" style="display:none;">
    <h3>Review Trip</h3>
    <div class="review">
      <div>Pickup: <span id="revPickup"></span></div>
      <div>Destination: <span id="revDest"></span></div>
      <div>Date: <span id="revDate"></span></div>
      <div>Time: <span id="revTime"></span></div>
      <div>Distance: <span id="revDistance">Calculating...</span></div>
      <div>Duration: <span id="revDuration">Calculating...</span></div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBiBOnLypU6-YGgPruQ2YFZvk3HyaaQ5Ps&libraries=places"></script>

<script>
/* BURGER MENU */
const burger=document.getElementById("burger");
const menu=document.getElementById("menu");
const menuBack=document.getElementById("menuBackdrop");
burger.onclick=()=>{menu.classList.add("open"); menuBack.classList.add("show");};
menuBack.onclick=()=>{menu.classList.remove("open"); menuBack.classList.remove("show");};

/* GOOGLE PLACES */
const pickupInput=document.getElementById("pickup");
const destInput=document.getElementById("destination");
const pickupAutocomplete = new google.maps.places.Autocomplete(pickupInput);
const destAutocomplete = new google.maps.places.Autocomplete(destInput);

/* CURRENT LOCATION */
document.getElementById("locBtn").onclick=()=>{
  if(!navigator.geolocation){alert("Location not supported"); return;}
  navigator.geolocation.getCurrentPosition(pos=>{
    pickupInput.value = pos.coords.latitude.toFixed(5)+", "+pos.coords.longitude.toFixed(5);
    showStep(2);
  }, ()=>{alert("Location permission denied");});
};

/* DATE & TIME PICKER */
flatpickr("#date",{minDate:"today", onChange:()=>{checkDateTime();}});
flatpickr("#time",{enableTime:true,noCalendar:true,dateFormat:"h:i K", onChange:()=>{checkDateTime();}});

/* STEP CONTROL */
const step1=document.getElementById("step1");
const step2=document.getElementById("step2");
const step3=document.getElementById("step3");
const step4=document.getElementById("step4");

function showStep(step){
  step1.style.display="none";
  step2.style.display="none";
  step3.style.display="none";
  step4.style.display="none";
  step.style.display="block";
}

/* AUTOMATIC FLOW */
pickupAutocomplete.addListener('place_changed',()=>{ showStep(step2); });
destAutocomplete.addListener('place_changed',()=>{ showStep(step3); });

function checkDateTime(){
  const dateVal=document.getElementById("date").value;
  const timeVal=document.getElementById("time").value;
  if(dateVal && timeVal){
    showStep(step4);
    fillReview();
  }
}

/* FILL REVIEW AND DISTANCE */
function fillReview(){
  document.getElementById("revPickup").textContent=pickupInput.value;
  document.getElementById("revDest").textContent=destInput.value;
  document.getElementById("revDate").textContent=document.getElementById("date").value;
  document.getElementById("revTime").textContent=document.getElementById("time").value;

  const service = new google.maps.DistanceMatrixService();
  service.getDistanceMatrix({
    origins:[pickupInput.value],
    destinations:[destInput.value],
    travelMode:"DRIVING",
    unitSystem: google.maps.UnitSystem.IMPERIAL
  }, (response, status)=>{
    if(status==="OK"){
      const el=response.rows[0].elements[0];
      document.getElementById("revDistance").textContent=el.distance.text;
      document.getElementById("revDuration").textContent=el.duration.text;
    } else {
      document.getElementById("revDistance").textContent="Error";
      document.getElementById("revDuration").textContent="Error";
    }
  });
}
</script>

</body>
</html>