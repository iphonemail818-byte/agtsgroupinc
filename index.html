<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Premium SUV Service</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Full-screen background */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .background-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.8);
        }

        /* Main container */
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 24px 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header with logo - SIMPLE AND CLEAN */
        .header {
            text-align: center;
            padding: 30px 0 40px;
            opacity: 0.95;
        }

        .logo {
            font-size: 32px;
            font-weight: 600;
            letter-spacing: 1px;
            color: #ffffff;
            margin-bottom: 10px;
        }

        .tagline {
            font-size: 14px;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* Booking container - CLEAR GLASS EFFECT */
        .booking-container {
            background: rgba(15, 15, 15, 0.7);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 28px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        /* Form elements */
        .form-group {
            margin-bottom: 28px;
            position: relative;
        }

        .input-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #ffffff;
            letter-spacing: 0.5px;
        }

        .input-wrapper {
            position: relative;
        }

        .input-field {
            width: 100%;
            padding: 18px 60px 18px 20px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1.5px solid rgba(255, 255, 255, 0.2);
            border-radius: 14px;
            color: #ffffff;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            -webkit-appearance: none;
        }

        .input-field:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        /* Location icon for pickup */
        .location-icon-btn {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            transition: all 0.2s ease;
        }

        .location-icon-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .location-icon-btn.active {
            background: rgba(76, 171, 247, 0.2);
        }

        .location-icon {
            width: 20px;
            height: 20px;
            fill: rgba(255, 255, 255, 0.9);
            transition: all 0.2s ease;
        }

        /* Plus icon for destination */
        .add-stop-btn {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            transition: all 0.2s ease;
        }

        .add-stop-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .plus-icon {
            width: 20px;
            height: 20px;
            fill: rgba(255, 255, 255, 0.9);
            transition: all 0.2s ease;
        }

        /* Stop fields container */
        .stops-container {
            margin-top: 10px;
        }

        .stop-field {
            margin-bottom: 12px;
            position: relative;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .remove-stop-btn {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.15);
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            color: #ffffff;
            font-size: 18px;
            font-weight: 300;
            transition: all 0.2s ease;
        }

        .remove-stop-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-50%) scale(1.1);
        }

        /* Summary items */
        .summary-container {
            margin-top: 8px;
        }

        .summary-item {
            padding: 16px 20px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            border-left: 3px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.2s;
        }

        .summary-item:hover {
            background: rgba(255, 255, 255, 0.12);
            border-left-color: rgba(255, 255, 255, 0.4);
        }

        .summary-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 6px;
            letter-spacing: 0.5px;
        }

        .summary-value {
            font-size: 15px;
            color: #ffffff;
            font-weight: 500;
        }

        /* DateTime inputs */
        .datetime-row {
            display: flex;
            gap: 15px;
        }

        .datetime-group {
            flex: 1;
        }

        /* Action buttons */
        .action-buttons {
            margin-top: auto;
            padding-top: 30px;
        }

        .btn {
            width: 100%;
            padding: 20px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: #ffffff;
            color: #0a0a0a;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover {
            background: #f5f5f5;
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            margin-top: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        /* Menu Options Toggle */
        .menu-toggle {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .menu-toggle:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.05);
        }

        .menu-icon {
            width: 24px;
            height: 24px;
            stroke: #ffffff;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 99;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .menu-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 300px;
        }

        .menu-option {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 14px;
            padding: 20px;
            color: #ffffff;
            font-size: 16px;
            font-weight: 500;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .menu-option:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .menu-option.active {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
        }

        /* Style Options */
        .style-options {
            margin-top: 30px;
            width: 100%;
            max-width: 300px;
        }

        .style-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            margin-bottom: 10px;
            text-align: center;
        }

        .style-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .style-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #ffffff;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .style-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .style-btn.active {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(20, 20, 20, 0.95);
            color: #ffffff;
            padding: 16px 24px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            backdrop-filter: blur(10px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .container {
                padding: 20px 16px;
            }
            
            .booking-container {
                padding: 24px;
                background: rgba(15, 15, 15, 0.75);
            }
            
            .input-field {
                padding: 16px 55px 16px 16px;
                font-size: 15px;
            }
            
            .datetime-row {
                flex-direction: column;
                gap: 12px;
            }
            
            .menu-toggle {
                top: 20px;
                right: 20px;
                width: 44px;
                height: 44px;
            }
        }
    </style>
</head>
<body>
    <!-- Background Image -->
    <div class="background-container">
        <img src="https://raw.githubusercontent.com/iphonemail818-byte/agtsgroupinc/main/IMG_6201.png" alt="Premium SUV Background">
    </div>

    <!-- Menu Toggle -->
    <div class="menu-toggle" id="menu-toggle">
        <svg class="menu-icon" viewBox="0 0 24 24">
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
        </svg>
    </div>

    <!-- Menu Overlay -->
    <div class="menu-overlay" id="menu-overlay">
        <div class="menu-options">
            <div class="menu-option" id="style-1">Style 1: Clean & Minimal</div>
            <div class="menu-option" id="style-2">Style 2: Dark & Premium</div>
            <div class="menu-option" id="style-3">Style 3: Glass Effect</div>
            <div class="menu-option" id="reset-style">Reset to Default</div>
            <div class="menu-option" id="test-geolocation">Test Current Location</div>
            <div class="menu-option" id="test-autocomplete">Test Address Search</div>
        </div>
        
        <div class="style-options">
            <div class="style-label">Transparency Level</div>
            <div class="style-buttons">
                <button class="style-btn" id="transp-70">70%</button>
                <button class="style-btn" id="transp-80">80%</button>
                <button class="style-btn active" id="transp-90">90%</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Main Content -->
    <div class="container">
        <div class="header">
            <div class="logo">PREMIUM SUV</div>
            <div class="tagline">Luxury Travel</div>
        </div>

        <div class="booking-container" id="booking-container">
            <!-- Pickup Location -->
            <div class="form-group">
                <label class="input-label">Pickup Location</label>
                <div class="input-wrapper">
                    <input type="text" 
                           id="pickup-input" 
                           class="input-field" 
                           placeholder="Current location or enter address"
                           autocomplete="off">
                    <button type="button" class="location-icon-btn" id="current-location-btn" title="Use current location">
                        <svg class="location-icon" viewBox="0 0 24 24">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                    </button>
                </div>
                <div class="summary-container" id="pickup-summary"></div>
            </div>

            <!-- Destination -->
            <div class="form-group">
                <label class="input-label">Destination</label>
                <div class="input-wrapper">
                    <input type="text" 
                           id="destination-input" 
                           class="input-field" 
                           placeholder="Enter destination address"
                           autocomplete="off">
                    <button type="button" class="add-stop-btn" id="add-stop-btn" title="Add a stop">
                        <svg class="plus-icon" viewBox="0 0 24 24">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                        </svg>
                    </button>
                </div>
                <div class="summary-container" id="destination-summary"></div>
            </div>

            <!-- Stops Container -->
            <div class="stops-container" id="stops-container"></div>

            <!-- Date & Time -->
            <div class="form-group">
                <label class="input-label">Date & Time</label>
                <div class="datetime-row">
                    <div class="datetime-group">
                        <div class="input-wrapper">
                            <input type="date" 
                                   id="date-input" 
                                   class="input-field">
                        </div>
                    </div>
                    <div class="datetime-group">
                        <div class="input-wrapper">
                            <input type="time" 
                                   id="time-input" 
                                   class="input-field">
                        </div>
                    </div>
                </div>
                <div class="summary-container" id="datetime-summary"></div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button type="button" class="btn btn-primary" id="review-btn">
                    Review Trip
                </button>
                <button type="button" class="btn btn-secondary hidden" id="edit-trip-btn">
                    Edit Trip Details
                </button>
            </div>
        </div>
    </div>

    <script>
        // Google Maps API Key
        const GOOGLE_MAPS_API_KEY = 'AIzaSyBiBOnLypU6-YGgPruQ2YFZvk3HyaaQ5Ps';
        
        // State management
        const state = {
            pickup: '',
            destination: '',
            stops: [],
            date: '',
            time: '',
            stopCount: 0,
            autocompleteService: null,
            geocoder: null,
            currentStyle: 'default'
        };

        // DOM Elements
        const elements = {
            menuToggle: document.getElementById('menu-toggle'),
            menuOverlay: document.getElementById('menu-overlay'),
            toast: document.getElementById('toast'),
            bookingContainer: document.getElementById('booking-container'),
            pickupInput: document.getElementById('pickup-input'),
            destinationInput: document.getElementById('destination-input'),
            dateInput: document.getElementById('date-input'),
            timeInput: document.getElementById('time-input'),
            currentLocationBtn: document.getElementById('current-location-btn'),
            addStopBtn: document.getElementById('add-stop-btn'),
            stopsContainer: document.getElementById('stops-container'),
            reviewBtn: document.getElementById('review-btn'),
            editTripBtn: document.getElementById('edit-trip-btn'),
            summaryContainers: {
                pickup: document.getElementById('pickup-summary'),
                destination: document.getElementById('destination-summary'),
                datetime: document.getElementById('datetime-summary')
            }
        };

        // Initialize date and time
        function initializeDateTime() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            const formattedDate = tomorrow.toISOString().split('T')[0];
            const nextHour = (now.getHours() + 1) % 24;
            const formattedTime = `${nextHour.toString().padStart(2, '0')}:00`;
            
            elements.dateInput.value = formattedDate;
            elements.timeInput.value = formattedTime;
            
            state.date = formattedDate;
            state.time = formattedTime;
            updateDateTimeSummary();
        }

        // Show toast notification
        function showToast(message, duration = 3000) {
            elements.toast.textContent = message;
            elements.toast.classList.add('show');
            
            setTimeout(() => {
                elements.toast.classList.remove('show');
            }, duration);
        }

        // Menu toggle
        elements.menuToggle.addEventListener('click', () => {
            elements.menuOverlay.classList.toggle('active');
        });

        // Close menu when clicking outside
        elements.menuOverlay.addEventListener('click', (e) => {
            if (e.target === elements.menuOverlay) {
                elements.menuOverlay.classList.remove('active');
            }
        });

        // Style options
        document.getElementById('style-1').addEventListener('click', () => {
            applyStyle('clean');
            showToast('Clean & Minimal style applied');
        });

        document.getElementById('style-2').addEventListener('click', () => {
            applyStyle('dark');
            showToast('Dark & Premium style applied');
        });

        document.getElementById('style-3').addEventListener('click', () => {
            applyStyle('glass');
            showToast('Glass Effect style applied');
        });

        document.getElementById('reset-style').addEventListener('click', () => {
            applyStyle('default');
            showToast('Default style restored');
        });

        // Test geolocation
        document.getElementById('test-geolocation').addEventListener('click', () => {
            testGeolocation();
        });

        // Test autocomplete
        document.getElementById('test-autocomplete').addEventListener('click', () => {
            testAutocomplete();
        });

        // Transparency options
        document.querySelectorAll('.style-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.style-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                const transparency = this.id.split('-')[1];
                setTransparency(transparency);
                showToast(`Transparency set to ${transparency}%`);
            });
        });

        // Apply style
        function applyStyle(style) {
            const container = elements.bookingContainer;
            
            // Reset styles
            container.style.background = '';
            container.style.backdropFilter = '';
            container.style.border = '';
            container.style.boxShadow = '';
            
            switch(style) {
                case 'clean':
                    container.style.background = 'rgba(255, 255, 255, 0.95)';
                    container.style.color = '#000000';
                    container.style.border = '1px solid rgba(0, 0, 0, 0.1)';
                    container.style.boxShadow = '0 10px 40px rgba(0, 0, 0, 0.1)';
                    break;
                case 'dark':
                    container.style.background = 'rgba(10, 10, 10, 0.95)';
                    container.style.backdropFilter = 'blur(20px)';
                    container.style.border = '1px solid rgba(255, 255, 255, 0.15)';
                    container.style.boxShadow = '0 20px 60px rgba(0, 0, 0, 0.5)';
                    break;
                case 'glass':
                    container.style.background = 'rgba(255, 255, 255, 0.1)';
                    container.style.backdropFilter = 'blur(25px)';
                    container.style.border = '1px solid rgba(255, 255, 255, 0.2)';
                    container.style.boxShadow = 'inset 0 1px 0 rgba(255, 255, 255, 0.1)';
                    break;
                default:
                    // Default style
                    container.style.background = 'rgba(15, 15, 15, 0.7)';
                    container.style.backdropFilter = 'blur(15px)';
                    container.style.border = '1px solid rgba(255, 255, 255, 0.15)';
                    container.style.boxShadow = '0 15px 50px rgba(0, 0, 0, 0.3)';
            }
            
            state.currentStyle = style;
        }

        // Set transparency
        function setTransparency(percent) {
            const opacity = (100 - percent) / 100;
            elements.bookingContainer.style.background = `rgba(15, 15, 15, ${opacity})`;
        }

        // Test geolocation
        function testGeolocation() {
            showToast('Testing geolocation...');
            
            if (!navigator.geolocation) {
                showToast('Geolocation not supported by browser');
                return;
            }

            elements.currentLocationBtn.classList.add('active');
            
            navigator.geolocation.getCurrentPosition(
                async (position) => {
                    const { latitude, longitude } = position.coords;
                    
                    try {
                        // Use Google Geocoding API
                        const response = await fetch(
                            `https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&key=${GOOGLE_MAPS_API_KEY}`
                        );
                        const data = await response.json();
                        
                        if (data.results && data.results[0]) {
                            elements.pickupInput.value = data.results[0].formatted_address;
                            state.pickup = data.results[0].formatted_address;
                            showToast('Location found! Address auto-filled.');
                        } else {
                            elements.pickupInput.value = `Current Location (${latitude.toFixed(6)}, ${longitude.toFixed(6)})`;
                            state.pickup = 'Current Location';
                            showToast('Coordinates found! Using lat/lng.');
                        }
                    } catch (error) {
                        elements.pickupInput.value = `Current Location (${latitude.toFixed(6)}, ${longitude.toFixed(6)})`;
                        state.pickup = 'Current Location';
                        showToast('Using coordinates directly.');
                    }
                    
                    elements.currentLocationBtn.classList.remove('active');
                    updateSummary('pickup');
                },
                (error) => {
                    elements.currentLocationBtn.classList.remove('active');
                    let errorMessage = 'Unable to retrieve location.';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage = 'Location access denied. Please enable in browser settings.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage = 'Location unavailable.';
                            break;
                        case error.TIMEOUT:
                            errorMessage = 'Location request timed out.';
                            break;
                    }
                    showToast(errorMessage);
                }
            );
        }

        // Test autocomplete
        function testAutocomplete() {
            showToast('Testing address search...');
            
            if (window.google && window.google.maps && window.google.maps.places) {
                showToast('Google Maps API is loaded! Try typing an address.');
            } else {
                showToast('Loading Google Maps API...');
                loadGoogleMapsAPI();
            }
        }

        // Load Google Maps API
        function loadGoogleMapsAPI() {
            if (window.google && window.google.maps) {
                initAutocomplete();
                return;
            }

            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&libraries=places&callback=initGoogleMaps`;
            script.async = true;
            script.defer = true;
            
            script.onload = () => {
                showToast('Google Maps API loaded successfully!');
                initAutocomplete();
            };
            
            script.onerror = () => {
                showToast('Failed to load Google Maps API. Check API key.');
            };
            
            document.head.appendChild(script);
        }

        // Initialize Google Maps
        window.initGoogleMaps = function() {
            if (window.google && window.google.maps) {
                state.geocoder = new google.maps.Geocoder();
                initAutocomplete();
            }
        };

        // Initialize autocomplete
        function initAutocomplete() {
            if (!window.google || !window.google.maps || !window.google.maps.places) {
                showToast('Google Maps API not available. Using fallback.');
                setupFallbackAutocomplete();
                return;
            }

            // Initialize autocomplete for pickup
            const pickupAutocomplete = new google.maps.places.Autocomplete(
                elements.pickupInput,
                {
                    types: ['address'],
                    componentRestrictions: { country: 'us' }
                }
            );

            // Initialize autocomplete for destination
            const destinationAutocomplete = new google.maps.places.Autocomplete(
                elements.destinationInput,
                {
                    types: ['address'],
                    componentRestrictions: { country: 'us' }
                }
            );

            // Add place change listeners
            pickupAutocomplete.addListener('place_changed', () => {
                const place = pickupAutocomplete.getPlace();
                if (place.formatted_address) {
                    state.pickup = place.formatted_address;
                    updateSummary('pickup');
                    showToast('Pickup address selected');
                }
            });

            destinationAutocomplete.addListener('place_changed', () => {
                const place = destinationAutocomplete.getPlace();
                if (place.formatted_address) {
                    state.destination = place.formatted_address;
                    updateSummary('destination');
                    showToast('Destination address selected');
                }
            });

            showToast('Address search ready! Start typing...');
        }

        // Fallback autocomplete (if Google API fails)
        function setupFallbackAutocomplete() {
            // Simple local suggestions for testing
            const suggestions = [
                'New York, NY',
                'Los Angeles, CA',
                'Chicago, IL',
                'Houston, TX',
                'Phoenix, AZ',
                'Philadelphia, PA',
                'San Antonio, TX',
                'San Diego, CA',
                'Dallas, TX',
                'San Jose, CA'
            ];

            [elements.pickupInput, elements.destinationInput].forEach(input => {
                input.addEventListener('input', function() {
                    const value = this.value.toLowerCase();
                    if (value.length > 2) {
                        const filtered = suggestions.filter(s => 
                            s.toLowerCase().includes(value)
                        );
                        // Simple dropdown could be implemented here
                        if (filtered.length > 0) {
                            showToast(`Suggestions available for "${value}"`);
                        }
                    }
                });
            });
        }

        // Current location button
        elements.currentLocationBtn.addEventListener('click', testGeolocation);

        // Add stop
        elements.addStopBtn.addEventListener('click', () => {
            const stopIndex = state.stopCount;
            const stopField = document.createElement('div');
            stopField.className = 'stop-field';
            stopField.innerHTML = `
                <div class="input-wrapper">
                    <input type="text" 
                           id="stop-${stopIndex}" 
                           class="input-field stop-input" 
                           placeholder="Enter stop address"
                           autocomplete="off">
                    <button type="button" class="remove-stop-btn" data-stop-id="stop-${stopIndex}">
                        Ã—
                    </button>
                </div>
            `;
            
            elements.stopsContainer.appendChild(stopField);
            state.stopCount++;
            showToast('Stop added');
        });

        // Remove stop
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('remove-stop-btn')) {
                e.target.closest('.stop-field').remove();
                showToast('Stop removed');
            }
        });

        // Update summary
        function updateSummary(field) {
            const container = elements.summaryContainers[field];
            if (!container) return;

            let value = state[field];
            let label = '';

            switch(field) {
                case 'pickup':
                    label = 'Pickup';
                    value = value || 'Not set';
                    break;
                case 'destination':
                    label = 'Destination';
                    value = value || 'Not set';
                    break;
                case 'datetime':
                    label = 'Date & Time';
                    if (state.date && state.time) {
                        const dateObj = new Date(state.date + 'T' + state.time);
                        value = dateObj.toLocaleString('en-US', {
                            weekday: 'short',
                            month: 'short',
                            day: 'numeric',
                            hour: 'numeric',
                            minute: '2-digit'
                        });
                    } else {
                        value = 'Not set';
                    }
                    break;
            }

            container.innerHTML = `
                <div class="summary-item" data-edit-field="${field}">
                    <div class="summary-label">${label}</div>
                    <div class="summary-value">${value}</div>
                </div>
            `;
        }

        // Update date/time summary
        function updateDateTimeSummary() {
            updateSummary('datetime');
        }

        // Handle date/time changes
        elements.dateInput.addEventListener('change', () => {
            state.date = elements.dateInput.value;
            updateDateTimeSummary();
        });

        elements.timeInput.addEventListener('change', () => {
            state.time = elements.timeInput.value;
            updateDateTimeSummary();
        });

        // Review trip
        elements.reviewBtn.addEventListener('click', () => {
            if (!state.pickup || state.pickup === 'Not set') {
                showToast('Please enter pickup location');
                return;
            }
            if (!state.destination || state.destination === 'Not set') {
                showToast('Please enter destination');
                return;
            }

            showToast('Trip review ready! Implement booking logic here.');
            // Your booking logic here
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeDateTime();
            loadGoogleMapsAPI();
            setTransparency(90); // Default to 90% transparency
            showToast('Ready to book! Use menu for options.', 2000);
        });

    </script>
</body>
</html>